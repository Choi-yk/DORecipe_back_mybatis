<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dorecipe.main.recipe.dao.RecipeDAO">

	<!-- 저장한 레시피목록 - savetype=0 -->
	<select id="getList" resultType="com.dorecipe.main.recipe.vo.RecipeVO">
		select * from recipe where recipe_savetype=0 order by recipe_num desc
	</select>
	
	<select id="getDetail" resultType="com.dorecipe.main.recipe.vo.RecipeVO"   parameterType="int">
      SELECT * from recipe
      where recipe_num = #{recipe_num}		
  	</select>
  	
  	<!-- 레시피재료 조회 -->
	<select id="getBundle" resultType="com.dorecipe.main.recipe.vo.RecipeVO"   parameterType="int">
	  select r.recipe_num,r.bundle,b.ing_ingredient,b.ing_amount from r_bundle r
	  inner join b_ingredient b
      on r.recipe_num=b.recipe_num and r.bundle_num=b.bundle_num
      where r.recipe_num = #{recipe_num}
  	</select>
  	
  	<!-- 요리순서 조회 -->
	<select id="getOrder" resultType="com.dorecipe.main.recipe.vo.RecipeVO"   parameterType="int">
	  select r.recipe_num,o.order_num,o.order_explain,o.order_path from recipe r
	  inner join r_order o
      on r.recipe_num=o.recipe_num
      where r.recipe_num = #{recipe_num}
  	</select>
  	
  	<!-- 코멘트 조회 -->
	<select id="getComment" resultType="com.dorecipe.main.recipe.vo.RecipeVO"   parameterType="int">
	  select * from comment where recipe_num=#{recipe_num} order by comment_num desc
  	</select>
	
</mapper>